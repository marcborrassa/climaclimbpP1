
<html>
<head>
    <meta charset="utf-8" />
    <title>Proves</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
<div id="map"></div>

<p onClick="ajaxCall()">Canvia</p>
<P id="resultatAPI">Aix√≤</P>

<script type="text/javascript">

     function ajaxCall() {
        $.ajax({
          type: 'GET',
          url: 'https://api.meteo.cat/xema/v1/estacions/metadades?estat=ope&data=2017-03-27Z',
          crossDomain: true,
          contentType: 'application/json',
          dataType: 'json',
          headers: {
            'X-Api-Key': '4HmTxc7yun4KyeLaNe0dyaDeVBZpj0SW1APUTpmn',
          },
          success: function (data, status) {
            document.getElementById('resultatAPI').innerHTML=JSON.stringify(data);
            console.log(data);
          },
        });
}
      </script>

<script>
    var settings = {
  "async": true,
  "crossDomain": true,
  "url": "https://opendata.aemet.es/opendata/api/valores/climatologicos/inventarioestaciones/todasestaciones/?api_key=jyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqbW9udGVyb2dAYWVtZXQuZXMiLCJqdGkiOiI3NDRiYmVhMy02NDEyLTQxYWMtYmYzOC01MjhlZWJlM2FhMWEiLCJleHAiOjE0NzUwNTg3ODcsImlzcyI6IkFFTUVUIiwiaWF0IjoxNDc0NjI2Nzg3LCJ1c2VySWQiOiI3NDRiYmVhMy02NDEyLTQxYWMtYmYzOC01MjhlZWJlM2FhMWEiLCJyb2xlIjoiIn0.xh3LstTlsP9h5cxz3TLmYF4uJwhOKzA0B6-vH8lPGGw",
  "method": "GET",
  "headers": {
    "cache-control": "no-cache"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
</script>
</body>

<script src="apijs.js"></script>
</html>
